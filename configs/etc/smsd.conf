#
# /etc/smsd.conf
#

# List of names of your modems, maximum 64 devices. This limit is changeable. After
# version >= 3.1.12 this setting can be given in shortened form: devices = GSM* 101-164 . "GSM"
# defines a prefix, "101" is the number of first modem and "164" is the number of last modem. The
# example is extracted to: devices = GSM101,GSM102,GSM103 etc...
devices = GSM1

# Path of the Outgoing Queue folder.
outgoing = /var/spool/sms/outgoing

# Path of the default Queue directory in case you do not use provider-sorting.
checked = /var/spool/sms/checked

# Path of the Incoming Folder.
incoming = /var/spool/sms/incoming

# Path of the Failed Folder. Delete this line if you do not want to keep failed files.
failed = /var/spool/sms/failed

# Path of the Sent Folder. Delete this line, if you do not want to keep copies of each sent message
# file.
sent = /var/spool/sms/sent

# Name of the blacklist and whitelist files. The black list takes precedence before the white list.
# See http://smstools3.kekekasvi.com/index.php?p=blacklist for more details and sample usage.
#blacklist = /etc/smstools/blacklist
#whitelist = /etc/smstools/whitelist

# Available from version >= 3.0.9. With this setting messages using ISO or GSM alphabet are stored
# using UTF-8 character set.
incoming_utf8 = yes

# Name of the log file. Delete this line, if you want to use the syslog for logging. You can use
# "1" to write to the console (stdout). This setting can be overridden by the -l (ell) command line
# argument.
#logfile = /var/log/smstools/smsd.log

# Sets the verbosity of a log file. This affects also syslog. If you want all messages in syslog,
# you need to set it to "7" (or higher) here and "*" in the config file of syslog. If you want less
# messages, you can reduce it here or in the config file of syslog, both will work.
#
#	debug    7  All AT-Commands and modem answers and other detailed informations useful for
#                 debugging
#	info     6  Information what is going on at the moment. Not detailled enough for debugging but
#                 maybe interesting.
#	notice   5  Information when a message was received or sent and when something not normal
#                 happens but program still works fine (for example wrong destination number in SMS
#                 file).
#	warning  4  Warning when the program has a problem sending a single short message.
#	error    3  Error message when the program has temporary problem (for example modem answered
#                 with ERROR during initialization or a file can not be accessed).
#	critical 2 Error message when the program has a permament problem (for example sending failed
#                 many times or wrong permissions to a queue).
#
# The numbers in this table are taken from GNU/Linux. Probably all operating systems use the same
# numbers. After version >= 3.1 a value can be defined as a word, like LOG_INFO, INFO or info.
loglevel = 5

# Specifies the directory where smsd stores statistic files. The directoy must exist before you
# start smsd. If not given, then the program does not write statistic files. After version >= 3.1.1
# message counter files are stored to this directory even if smsd is compiled without statistics
# enabled.
stats = /var/log/smstools/smsd_stats

# Smsd writes statistics files every n seconds. Value "0" disables statistics but counters are
# still updated if stats directory is defined.
stats_interval = 3600

# Smsd does not write statistic files when no message was sent or received (Zero-Counters) if this
# is set to yes.
stats_no_zeroes = no

# Location of infofile and pidfile can be changed with these settings. This is usually necessary if
# the smsd is running as an unpriviledged user. If a sms3 script is used to start and stop the smsd,
# these settings should be defined in the script. These four settings can be overridden by the
# command line argument(s):
#
#	-ix set infofile to x
#	-px set pidfile to x
#	-ux set username to x
#	-gx set groupname to x
#
#infofile = /var/run/smstools/smsd.working
pidfile = /var/run/smsd.pid

# Smsd sleep so many seconds when it has nothing to do.
delaytime = 15

# Available after >= 3.1.4. If this value is not set, delaytime setting is used in the main process.
# With this setting outgoing messages can be checked more frequently than incoming messages.
delaytime_mainprocess = 15

# A modem sleeps so many seconds when it answers a command with ERROR.
errorsleeptime = 30

# A modem is not used so many seconds when it seems to be out of order.
blocktime = 3600

# Forces smsd to empty the first SIM card memory before sending SM. This is a workaround for modems
# that cannot send SM with a full SIM card.
receive_before_send = no

# Controls if and how the program splits large text messages. The program does not split text
# messages with UDH. If splitting is disabled, binary messages requiring more than one part are
# not sent.
#
#	0   disabled
#	1   enabled, no part-number
#	2   enabled, text numbers
#	3   enabled, concatenated format (not supported by some phones)
#
autosplit = 3

# Available from version >= 3.0. Controls when the incoming PDU string(s) is stored to message file.
#
#	0 	no PDU's are stored
#	1 	unsupported PDU's are stored
#	2 	unsupported and PDU's with 8bit binary data or Unicode text are stored
#	3 	all PDU's are stored
#
# Header is "PDU: " and PDU's of a multipart message are stored from 1 to n order.
store_received_pdu = 1

# Available from version >= 3.0.9. Controls when the outgoing PDU string(s) is stored to message file.
#
#	0   no PDU's are stored
#	1   failed (to send) PDU's are stored
#	2   failed and PDU's with 8bit binary data or Unicode text are stored
#	3   all PDU's are stored
#
# Header is "PDU: " and PDU's of a multipart message are stored from 1 to n order.
store_sent_pdu = 1

# Available from version >= 3.1.1. This setting defines if all executables are checked during the
# startup check. Usually eventhanler, alarmhandler etc. are shell scripts or some other single
# files which can be executed and therefore checked simply. If using a settings like
# eventhandler = /usr/local/bin/php -f /usr/local/bin/smsd_eventhandler.php, the check will fail
# and smsd will not start unless executable_check = no is defined.
executable_check = yes

# External program that checks if a message file is valid. (This script can also be used to convert
# message file from UTF-8 to ISO format, which is internal format used in smsd. See
# scripts/checkhandler-utf-8 for sample code.) After version >= 3.0.9 the smsd converts messages
# automatically from UTF-8 to ISO, if it is necessary. If the checkhandler return a non-zero (other
# than 2) exitcode the message will not be sent. With the smsd version >= 3.1 the checkhandler can
# also modify a message file. Exitcode 2 means that the checkhandler has moved a message to the
# spooler by itself.
#checkhandler = /usr/local/bin/smscheck

# Specifies an external program or script that will execute whenever a message was sent, received
# or failed. (If your locale is UTF-8, you can use this script to convert received messages from
# smsd's internal format (ISO) to UTF-8. See scripts/eventhandler-utf-8 for code sample.) After
# version >= 3.0.9 there is incoming_utf8 = yes setting available. Using this setting the external
# conversion is not required.
eventhandler = /opt/skrypty/lte-modem/lte

# Available from version >= 3.1.7. This setting defines an eventhandler to use with USSD messages.
# It is possible to use the same script or program which is used as eventhandler, but it's not a
# default because basically those scripts are not compatible without modifications. After an USSD
# message is received, and probably ussd_convert is done, eventhandler_ussd is called. Smsd checks
# what is the current character set of a modem and creates a temporary file which contains the USSD
# answer. Arguments for the eventhandler_ussd are:
#
#	$1   "USSD" keyword.
#	$2   Filename (which contains the answer).
#	$3   Devicename.
#	$4   Character set.
#	$5   Command what was used to get the USSD answer.
#
# Eventhandler_ussd can do whatever is needed with the USSD answer. It can also modify the answer,
# or delete the file. After eventhandler_ussd returns, smsd will check if the file still exists.
# If it exists, it's first line is taken as a new answer. Modified answer is then logged and
# probably printed to the regular_run_statfile.
#eventhandler_ussd = /opt/skrypty/lte-modem/ussd

# You can specify here an external program that is started whenever an alarm occurs. After
# version >= 3.1 a value can be defined as a word, like LOG_INFO, INFO or info.
#alarmhandler = /path/to/an/alarmhandler/script

# Specifies what levels start an alarmhandler. You can use value between 2 and 7.
#alarmlevel = 4

# Available from version >= 3.0. See http://smstools3.kekekasvi.com/index.php?p=fileformat for
# details of possible values.
#validity = 255

# Available from version >= 3.0. Controls when the incoming Unicode text is decoded internally.
#decode_unicode_text = no

# Available from version >= 3.0. Controls when the incoming multipart message is combined
# internally.
#internal_combine = no


[GSM1]
# Available from version >= 3.0.8. Specifies if "echo off" and "CMEE=1" commands are sent to the
# modem before anything else is done.
pre_init = yes

# Specifies a modem initialisation command. Most modems do not need any init string. See the manual
# of your modem for more details of modem commands.
#init = ATQ0 V1 E1 H0 S0=0

# Specifies a second modem initialisation command. Most users do not need this.
#init2 = AT+CMGF=1;^CURC=0;^USSDMODE=0
#init2 = AT+CPMS="SM";+CNMI=2,0,0,2,1

# Specifies the device name of the serial port or internet host to the modem. GNU/Linux example:
# /dev/ttyS0. Windows example: /dev/com1 or /dev/ttyS0. Solaris example: /dev/cuaa. Network modem
# example: @10.1.1.1:5000. After version >= 3.1.7 this setting can define a socket if starting with
# character @. Format for the internet host is: @<host_or_ip>:<port>. Host definition can be name
# or IP address. After version >= 3.1.12 this setting can contain a special word "modemname"
# (without quotation marks), for example: /dev/ttymodemname . When a device is USB0, the setting is
# extracted as /dev/ttyUSB0.
device = /dev/huawei-E3372-1

# Specifies if the program should read incoming SM from this modem. "Yes" or "1" means that smsd
# receives with less priority. The value "high" or "2" means that smsd receives with high priority.
# "No" or "0" means that smsd does not receive messages.
incoming = yes

# Specifies the PIN number of the SIM card inside the modem. See also pinsleeptime. Note after
# version >= 3.1.1: Even if a PIN is not defined, it's still checked if a PIN is needed. Some
# phones may give an incorrect answer for the check when a pin is not needed, like SIM PIN2 or
# SIM PUK2 instead of READY. In this case define pin = ignore to skip the whole PIN handling
# procedure.
pin = ignore

# Available from version >= 3.0.9. Specifies how many seconds the program will sleep after a PIN is
# entered. Some modems do not work without some delay.
pinsleeptime = 0

# Specifies the speed of the serial communication in bits per second. Most modems including old
# devices work well with 115200. If this speed is not supported by the system, 19200 is used. Some
# very old devices may need lower speed like 9600 baud.
baudrate = 115200

# Available from version >= 3.1, enhanced in version 3.1.5. Defines how network registration is
# checked:
#
#	0 (no)     Network registration is not checked.
#	1 (yes)    Network registration is always checked
#	2          Network registration is checked only when preparing to send messages.
#
# If a modem does not support network checking, checking is automatically ignored. With value 2
# incoming messages are processed faster.
check_network = 2

# Defines how incoming messages are checked:
#
#	0   CPMS is not supported. Default values are used for used_memory and max_memory.
#	1   CPMS is supported and must work. In case of failure incoming messages are not read.
#	2   CMGD is used to check messages. Some devices does not support this.
#         To see if this is supported, check the answer for AT+CMGD=? command. Answers like:
#         +CMGD: (1,2,3),(0-4) -- is supported, there are messages number 1, 2 and 3 in the memory.
#         +CMGD: (),(0-4)      -- is supported, no messages in the memory.
#         +CMGD: (1-30)        -- is not supported, a modem does not give message numbers even if
#                                 there is messsages available.
#	3 	CMGL is used to check messages. Message is deleted after it is read.
#	4 	CMGL is used to check messages. Messages are deleted after all messages are read.
#	31 	CMGL is used to check messages. Message is deleted after it is read. CMGL data is checked
#         and PDU is taken directly from the list.
#	41 	CMGL is used to check messages. Messages are deleted after all messages are read. CMGL data
#         is checked and PDU is taken directly from the list.
#	5 	CMGL is used to check messages. Messages are deleted after all messages are read. CMGL data
#         is checked and PDU is taken directly from the list. Multipart message is handled after
#         all of it's parts are available. After multipart message is handled, only the first part
#         is deleted by the smsd. The modem will delete rest of parts by itself. This is SIMCOM
#         SIM600 compatible.
#
# NOTE: Some devices are incompatible with CMGL method.
# NOTE: With values 31, 41 and 5 priviledged_numbers sorting can be used.
check_memory_method = 2

# These three settings are used to control dual-memory handler, available from version >= 3.0. If
# your modem/phone receives messages to the Mobile Equipment (ME) memory after the SIM memory (SM)
# has been filled up, with dual-memory handler messages can be read from the Mobile Equipment
# memory too. Defining secondary_memory_max is needed, if your device does not tell how much there
# is space in the Mobile Equipment memory. For example the Nokia 6210 does not tell (it returns 0
# as max value) and with this device 150 is reasonable value. From version >= 3.1, multiple
# parameters can be defined for memories, like SM,SM,SM. Double-quotation marks are not necessary
# to use in the string.
primary_memory = SM
secondary_memory = SM
secondary_memory_max = 25

# Tells the first memory space number for received messages. This is normally 1, Vodafone Mobile
# Connect Card starts with 0.
memory_start = 1

# Available from version >= 3.1.5. Before any command is sent to the modem, smsd checks if there is
# some unexpected input. For example some modem may send new message identification (CMTI) if
# settings are incorrect. Any unexpected input will be logged.
detect_unexpected_input = yes

# Available from version >= 3.1.5. These settings define if message counters and explained signal
# quality is included in the line of status file. Modem setting overrides global setting.
status_include_counters = no
status_signal_quality = no

# Available from version >= 3.1.7. Defines if a details from device are printed to the log when
# modem process is starting. With beta versions of smsd this setting defaults to yes, otherwise it
# defaults to no.
report_device_details = no

# Available from version >= 3.1.7. Defines how many times smsd will retry when cannot open a device.
# When maximum number of retries is reached, modem process will call alarmhandler and stop. With
# value -1 smsd will retry forever.
device_open_retries = -1

# Available from version >= 3.1. If this is changed to no, a modem is closed while it's not used.
keep_open = no

# Specifies version of modem command set. Almost everybody needs to use this as a "new". From
# version >= 3.0.9 this effects mainly to the sending side. In the receiving side the incoming PDU
# is checked, and if it does not match to the selected mode, another mode is tried automatically.
#
#	old    -- For Falcom A1 and maybe some other old modems of GSM phase 1 (1990-1995). In the
#               receiving side this mode does not have SCA information in the begin of PDU.
#	new    -- For nearly all mobile phones and modems. In the receiving side this mode has SCA
#               information in the begin of PDU. (SCA stands for Service Centre Address).
mode = new

# Available from version >= 3.1.7. After being idle, some modems do not answer to the first AT
# command. For example with BenQ M32, there can be OK answer, but in many times there is not. To
# avoid error messages, smsd first send AT and read the answer if it's available.
needs_wakeup_at = no

#number =

# If you enable this, the program requests a status report SM from the SMSC for each sent message.
# This does not work on many mobile phones and on some modems.
report = no

# You can disable usage of hardware handshake wires by setting this option to "no". Please don't
# use this feature in commercial applications because the hardware handshake wires ensure proper
# communications timing between the computer and the modem.
rtscts = no
